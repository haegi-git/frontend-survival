# TDD

## 학습 키워드

* TDD란?
* Jest
* Describe - Context - It 패턴
* 단위테스트란?

* * *

### TDD란?

[참고 자료](https://jay-flow.medium.com/tdd%EB%9E%80-%EB%AC%B4%EC%97%87%EC%9D%B4%EB%A9%B0-%EC%99%9C-%ED%95%84%EC%9A%94%ED%95%9C%EA%B0%80-18cb5979629c)

TDD란 테스트 주도 개발 이라 하며 반복 테스트를 이용한 소프트웨어 방법론이다. 작은 단위의 테스트 케이스를 작성하고 이를 통과하는 코드를 추가하는 단계를 반복한다.

TDD의 장단점

* 장점
  * 코드를 작성전 설계에 대해 구체적으로 작성이 가능하다.
  * 오류에 대해 신속한 파악이 가능하며 디버깅 시간을 단축시킨다.
  * 문서의 대체 가능
* 단점
  * 단기적으로 봤을 때 테스트 코드를 작성하는 시간이 소모된다.
  * 100%의 안정성을 보장해주지는 않는다.

TDD의 종류

* 단위테스트
  * 단일 함수 또는 클래스를 테스트 하는 것으로 논리 단위의 정확성을 확인하는 것을 목표로 한다. 다음은 단위 테스트에 포함이 되지 않는다. - 디스크에 쓰고 읽는 것, 화면에 렌더링 되는 것, 테스트가 실행되는 프로세스 외부에서 사용자의 입력을 외부에서 받은 것
* 컴포넌트 테스트
  * 하나의 컴포넌트 또는 위젯을 테스트 하는것으로 UI 테스트 하는 것에 속한다. 컴포넌트 테스트는 위젯의 UI가 예상대로 보이고 상호작용을 하는 것을 목표로 한다.
* 통합 테스트
  * 완전한 응용 프로그램을 통합적으로 테스트 하는것을 말한다. 테스트중인 모든 위젯과 서비스가 예상대로 동작하는지 확인하는 것을 목표로 한다. 앱의 성능 또한 확인 가능하며 일반적으로 서비스되는 플랫폼에 따라 앱의 경우 모바일 기기에서 웹의 경우 브라우저에서 테스트가 진행됨

* * *

### Jest

Jest란 코드가 제대로 작동하는지에 대한 Test Case를 만드는 페이스북이 개발한 JS 테스팅 프레임워크다.

Jest를 사용하려면 설치부터 해주어야한다.(설치는 블로그에서)

테스트 케이스를 정의할 때 크게 두가지 방법을 사용한다.

1. test 함수로 개별 테스트를 나열하는 방식.
2. BDD 스타일로 주체-행위 중심으로 테스트를 조직화 하는 방식

테스트 함수로 개별 테스트 진행해본 코드

```js
test('add',()=>{
    expect(add(1,2)).toBe(3);
});
```

BDD 스타일로 테스트 대상과 행위를 드러낸 코드

```js
describe('add',()=>{
    it('두 숫자의 합은',()=>{
        expect(add(1,2)).toBe(3);
    });
});
```

BDD 스타일을 사용한 다양한 경우의 코드

```js
const context = describe;

describe('add', () => {
 context('with no argument', () => {
  it('returns zero', () => {
   expect(add()).toBe(0);
  });
 });

 context('with only one number', () => {
  it('returns the same number', () => {
   expect(add(1)).toBe(1);
  });
 });

 context('with two numbers', () => {
  it('returns sum of two numbers', () => {
   expect(add(1, 2)).toBe(3);
  });
 });

 context('with three numbers', () => {
  it('returns sum of three numbers', () => {
   expect(add(1, 2, 3)).toBe(6);
  });
 });
});
```

그리고 Jest에서는 context를 지원하지않는다.

Jest에서 ts를 사용하려면 jext.config.js를 설정해주어야한다. (설정은 블로그에 다 저장해둘 예정)

```js
function add(...numbers: number[]):number{
    if(numbers.length === 0 ){
        return 0;
    }
    return numbers.reduce((acc,number) => acc + number)
}
```

다양한 경우일 때 BDD 스타일에서 사용된 add함수

### Describe - Context - It 패턴을 사용하는게 BDD 스타일이다

BDD스타일의 장점은(GPT)

* 테스트 코드의 가독성이 좋다.
  * 위에서 예시로 들어진 코드를 봐도 충분히 테스트 대상과 어떤 테스트를 하는지를 알 수 있다.
* 비즈니스 요구사항을 이해하고 반영하기 쉽다.
  * BDD 스타일은 소프트웨어 개발에서 비즈니스 요구사항을 이해하고 검증하는 것을 중심으로 개발한 방법론이다.
* 테스트 코드의 유지보수가 용이해진다.
  * BDD스타일은 가독성이 높고 비즈니스 요구사항을 반영하도록 작성된다. 그러한 이유로 유지보수가 용이해진다.
* 테스트를 작성하며 개발이 가능하다.
  * BDD는 테스트 주도 개발(TDD) 개념 기반이다. BDD 스타일의 테스트 코드를 작성하면서 개발을 진행할 수 있으며 테스트 코드를 통해 개발 진행 상황을 파악할 수 있다.
* 테스트 코드와 소스 코드간의 결합도가 낮아진다.
  * BDD 스타일의 테스트 코드는 소스 코드와 분리되어 작성된다. 그렇기에 테스트 코드와 소스 코드의 결합도가 낮아져 소스 코드를 변경해도 테스트 코드에 영향을 미치지 않도록 할 수 있다.

BDD스타일의 단점(GPT)

* 초기 투자 비용이 높다.
  * 기존의 테스트 코드를 전면 수정하거나 새로 작성해야 할 수 있기에 초기 투자 비용이 높아질 수 있음
* 학습 곡선이 높다.
* 테스트 코드의 실행 속도가 느려질 수 있다.
  * BDD 스타일의 테스트 코드는 자연어로 작성되기 때문에 실행 속도가 일반적인 코드에 비해 느려질 수 있다. 이러한 이유로 대규모 테스트 환경에서는 테스트 코드의 실행 속도를 최적화 하는 것이 중요하다.
* 테스트 코드 작성 시간이 늘어날 수 있다.
  * BDD 스타일의 테스트 코드는 기능과 상황을 명확하게 설명해야하기에 작성 시간이 일반적인 코드에 비해 늘어날 수 있다.
* 모든 요구사항을 커버하지 못할 수 있다.
  * BDD는 비즈니스 요구사항 중심으로 개발하는 방법론이지만 모든 요구사항을 커버하지 못할 수도 있다. 따라서 추가적인 테스트 방법을 도입해야할 수 있음

* * *

### 테스트에 대한 생각

테스트는 1주 차에서도 아주아주 약간 맛만 봤었지만 어렵다는걸 느껴봤었다. 이해도 잘 안되고 이해하는데 시간이 꽤나 걸렸었다.

지금은 1주차에서 그래도 어느정도 이해를하고 넘어와 위 예시 코드가 읽어지지만 좀 더 복잡해지고 여러 상황의 테스트 코드를 작성하다보면 시간도 많이 걸릴 것 같다.

지금은 그저 익숙해지는 것에만 집중하는게 좋을 듯 하다.